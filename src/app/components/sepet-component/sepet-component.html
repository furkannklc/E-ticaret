<p-toast position="top-center" key="br"/>

@if (loading) {
  <div class="flex item-center justify-center">
    <p-progress-spinner ariaLabel="loading"/>
  </div>
} @else {

  <div class="flex flex-col rounded gap-5 rounded-xl shadow-lg border border-gray-200  w-full flex-1 px-2">
    @if (miktar > 0) {
      <div class="flex flex-col w-full gap-1 p-3 items-center justify-center gap-2 ">
        <h1 style="color: black; font-size: 30px; font-weight: bold; margin-bottom: 20px;">
          Toplam Fiyat ${{ toplamFiyati }}
        </h1>
<!--        <p style="color: #666; font-size: 18px; margin-bottom: 30px;">-->
<!--          FREE SHIPPING AND RETURN-->
<!--        </p>-->
        <button routerLink="/" class="bg-green-500 hover:bg-green-600 text-white font-semibold px-8 py-3 rounded-lg transition-colors ">
          Alışverişi Bitir
        </button>
      </div>
      <hr class="my-4 border-t border-gray-200 "/>
      <div class="flex flex-row justify-end">
        <button (click)="sepetiBosalt()"
                class="bg-red-500 hover:bg-red-600 text-white font-semibold px-8 py-3 rounded-lg transition-colors">
          Sepeti Boşalt
        </button>
      </div>

      <div class="flex flex-col w-full gap-1 p-3   ">
        @for (urun of sepetUrunleri; track urun.id) {
          <div class="flex flex-row  justify-between p-8 bg-white rounded-lg shadow-sm text-black">
            <div class="flex flex-row  gap-4">
              <img [src]="urun.image" alt="Product Image" class="w-48 h-36 rounded-md"/>
              <div class="flex flex-col">
                <h1 style="color: black; font-weight: bold; font-size: 15px">{{ urun.title }}</h1>
                <span style="color: black;  font-size: 30px">{{ urun.size }}</span>
                <span>{{ urun.color }}</span>
                </div>


            </div><div class="flex flex-col gap-4">
            <div class="flex flex-row gap-4 ">
              <span>${{ urun.price * urun.count }}</span>
              <i (click)="urunuSil(urun.id,urun.size,urun.color)" class="pi pi-trash mt-1 "></i>
            </div>
            <p-autoComplete
              [(ngModel)]="urun.count"
              [dropdown]="true"
              [suggestions]="quantityItems"
              (completeMethod)="searchQuantity($event)"
              (onSelect)="updateQuantity(urun, urun.count)"
              class="w-20"
              inputStyleClass="bg-white text-black text-center p-1"

            ></p-autoComplete>
          </div>
          </div>
        }
      </div>
    } @else {
      <div class="w-full flex flex-row gap-3 items-center ml-5 p-10 justify-between">
        <div class="p-3 flex flex-row gap-8 items-center">
          <div class="p-5 bg-orange-100 rounded-full">
            <i style="font-size: 30px; color: #ffa700;" class="pi pi-shopping-cart mt-1"></i>
          </div>
          <span style="font-size: 30px" class="text-black">Sepetinizde Ürün Bulunmamaktadır</span>
        </div>
        <div>
          <button
            class="text-white bg-orange-400 rounded-full px-10 py-3 cursor-pointer hover:bg-orange-500 transition-colors"
            routerLink="/">
            Alışverişe Başla
          </button>
        </div>
      </div>
    }
  </div>
}

